{% extends 'cust_base/base.html' %}
{% load static %}

{% block styling %}
    <link rel="stylesheet" href="{% static 'customer/css/login.css' %}">
{% endblock styling %}

{% block content %}
<div style="background: url('{{MEDIA_URL}}images/bg-table.jpg') no-repeat center center/cover; padding-top: 6rem; padding-bottom: 2rem;">
    <div class="login-container">
        <h1>User Login</h1>
        <form method="post" id="login-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="id_username">{{ form.username.label }}</label>
                {{ form.username }}
                <div id="username-error" style="color: red; font-size: 0.9rem; margin-top: 0.3rem; display: none;"></div>
            </div>

            <div class="form-group">
                <label for="id_password">{{ form.password.label }}</label>
                {{ form.password }}
                <div id="password-error" style="color: red; font-size: 0.9rem; margin-top: 0.3rem; display: none;"></div>
            </div>

            <button type="button" class="btn-submit" onclick="validateLoginForm()">Login</button>
        </form>

        <p>Don't have an account? <a href="{% url 'register' %}">Register here</a></p>
        <p><a href="{% url 'password_reset' %}">Forgot Password?</a></p>
    </div>
</div>

<script>
    function validateLoginForm() {
        let isValid = true;

        // Clear previous errors
        document.getElementById("username-error").style.display = "none";
        document.getElementById("password-error").style.display = "none";

        // Get input values
        const username = document.getElementById("id_username").value.trim();
        const password = document.getElementById("id_password").value.trim();

        // Validate fields
        if (!username) {
            document.getElementById("username-error").innerText = "Username is required.";
            document.getElementById("username-error").style.display = "block";
            isValid = false;
        }

        if (!password) {
            document.getElementById("password-error").innerText = "Password is required.";
            document.getElementById("password-error").style.display = "block";
            isValid = false;
        }

        if (isValid) {
            document.getElementById("login-form").submit();
        }
    }
</script>

{% endblock %}
